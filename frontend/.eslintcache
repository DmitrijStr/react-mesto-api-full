[{"/home/dmitrij/dev/react-mesto-api-full/frontend/src/index.js":"1","/home/dmitrij/dev/react-mesto-api-full/frontend/src/serviceWorker.js":"2","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/App.js":"3","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/Footer.js":"4","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/Main.js":"5","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/Header.js":"6","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/EditAvatarPopup.js":"7","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/EditProfilePopup.js":"8","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/ImagePopup.js":"9","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/AddPlacePopup.js":"10","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/Register.js":"11","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/InfoTooltip.js":"12","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/Login.js":"13","/home/dmitrij/dev/react-mesto-api-full/frontend/src/auth.js":"14","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/ProtectedRoute.js":"15","/home/dmitrij/dev/react-mesto-api-full/frontend/src/contexts/CurrentUserContext.js":"16","/home/dmitrij/dev/react-mesto-api-full/frontend/src/utils/Api.js":"17","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/Card.js":"18","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/PopupWithForm.js":"19","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/NavBar.js":"20"},{"size":607,"mtime":1606520039000,"results":"21","hashOfConfig":"22"},{"size":5086,"mtime":1601406954000,"results":"23","hashOfConfig":"22"},{"size":7486,"mtime":1607855527000,"results":"24","hashOfConfig":"22"},{"size":192,"mtime":1601414862000,"results":"25","hashOfConfig":"22"},{"size":1758,"mtime":1606807320000,"results":"26","hashOfConfig":"22"},{"size":724,"mtime":1607798615000,"results":"27","hashOfConfig":"22"},{"size":711,"mtime":1606998870000,"results":"28","hashOfConfig":"22"},{"size":1461,"mtime":1606999513000,"results":"29","hashOfConfig":"22"},{"size":585,"mtime":1606806960000,"results":"30","hashOfConfig":"22"},{"size":1209,"mtime":1606806888000,"results":"31","hashOfConfig":"22"},{"size":1204,"mtime":1606721249000,"results":"32","hashOfConfig":"22"},{"size":678,"mtime":1606702797000,"results":"33","hashOfConfig":"22"},{"size":979,"mtime":1606703017000,"results":"34","hashOfConfig":"22"},{"size":2717,"mtime":1607855510000,"results":"35","hashOfConfig":"22"},{"size":318,"mtime":1606565611000,"results":"36","hashOfConfig":"22"},{"size":83,"mtime":1602889475000,"results":"37","hashOfConfig":"22"},{"size":2351,"mtime":1607855447000,"results":"38","hashOfConfig":"22"},{"size":1507,"mtime":1607857042000,"results":"39","hashOfConfig":"22"},{"size":704,"mtime":1606806999000,"results":"40","hashOfConfig":"22"},{"size":409,"mtime":1607798633000,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"fybjo4",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"44"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"/home/dmitrij/dev/react-mesto-api-full/frontend/src/index.js",[],["84","85"],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/serviceWorker.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/App.js",["86","87"],"import React, { useState, useEffect } from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup'\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\nimport api from '../utils/Api'\nimport Register from './Register';\nimport Login from './Login';\nimport { register, authorize, getContent, getInitialCards, postCard, patchUserInfo, patchAvatar, putLike, removeLike, deleteCard } from '../auth';\nimport ProtectedRoute from './ProtectedRoute';\nimport InfoTooltip from './InfoTooltip';\n\nfunction App() {\n\n  const [loggedIn, setLoggedIn] = useState(false)\n  const history = useHistory();\n  const [token, setToken] = useState('')\n\n  useEffect(_ => {\n    tokenCheck()\n  }, [])\n\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false)\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false)\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false)\n  const [selectedCard, setSelectedCard] = useState({});\n  const [isCardPopupOpen, setCardPopupOpen] = useState(false)\n  const [currentUser, setcurrentUser] = useState({})\n  const [cards, getCards] = useState([])\n  const [infoTooltipState, setInfoTooltipState] = useState({\n    message: '',\n    success: Boolean,\n    open: false\n  });\n\n\n  const getCardsState = (token) => {\n    getInitialCards(token)\n      .then((data) => {\n        const items = data.map((el) => ({\n          _id: el._id,\n          name: el.name,\n          link: el.link,\n          likes: el.likes,\n          owner: el.owner\n        }))\n        getCards(items);\n      })\n      .catch(err => console.log(err))\n  }\n\n  // useEffect(() => {\n  //   api.getInitialCards()\n  //     .then((data) => {\n  //       const items = data.map((el) => ({\n  //         _id: el._id,\n  //         name: el.name,\n  //         link: el.link,\n  //         likes: el.likes,\n  //         owner: el.owner\n  //       }))\n  //       getCards(items);\n  //     })\n  //     .catch(err => console.log(err))\n  // }, [])\n\n  function handleCardClick(card) {\n    setCardPopupOpen(true)\n    setSelectedCard(card)\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true)\n  }\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true)\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true)\n  }\n\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false)\n    setAddPlacePopupOpen(false)\n    setEditProfilePopupOpen(false)\n    setCardPopupOpen(false)\n    setInfoTooltipState({\n      open: false\n    })\n  }\n\n  function handleCardDelete(id) {\n    deleteCard(token, id)\n      .then(() => {\n        getCards(cards.filter(card => card._id !== id))\n      })\n      .catch(err => console.log(err))\n  }\n\n  function handleCardDislike(id) {\n    removeLike(token, id)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === id ? newCard : c);\n        getCards(newCards);\n      })\n      .catch(err => console.log(err))\n  }\n\n  function handleCardLike(id) {\n    putLike(token, id)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === id ? newCard : c);\n        getCards(newCards);\n      })\n      .catch(err => console.log(err))\n  }\n\n  function handleUpdateUser(newData) {\n    patchUserInfo(token, newData)\n      .then((data) => {\n        console.log(data)\n        setcurrentUser(data)\n        closeAllPopups()\n      })\n      .catch(err => console.log(err))\n  }\n\n  function handleUpdateAvatar(newAvatar) {\n    patchAvatar(token, newAvatar)\n      .then((data) => {\n        console.log(data)\n        setcurrentUser(data)\n        closeAllPopups()\n      })\n      .catch(err => console.log(err))\n  }\n\n  function handleAddPlaceSubmit(newCard) {\n    postCard(token, newCard)\n      .then((data) => {\n        console.log(data)\n        getCards([...cards, data]);\n        closeAllPopups()\n      })\n      .catch(err => console.log(err))\n  }\n\n  const handleLogin = (email, password) => {\n    authorize(email, password)\n      .then(data => {\n        if (data.token) {\n          localStorage.setItem('jwt', data.token)\n          tokenCheck()\n        }\n      })\n      .catch(err => console.error(err))\n  }\n\n  const handleLogout = () => {\n    localStorage.removeItem('jwt');\n    setcurrentUser({})\n    setLoggedIn(false)\n    setToken(null)\n  }\n\n  const handleRegister = (email, password) => {\n    register(email, password)\n      .then(data => {\n        console.log(data)\n        if (data.data._id) {\n          setInfoTooltipState({\n            message: 'Вы успешно зарегистрировались!',\n            success: true,\n            open: true\n          })\n          history.push('/sign-in')\n        }\n      })\n      .catch(err => {\n        console.log(err)\n        setInfoTooltipState({\n          message: 'Что-то пошло не так! Попробуйте ещё раз.',\n          success: false,\n          open: true\n        })\n      })\n  }\n\n  const tokenCheck = () => {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      setToken(jwt)\n      getContent(jwt)\n        .then((res) => {\n          console.log(res)\n          if (res.data.email) {\n            setcurrentUser(res.data)\n            setLoggedIn(true)\n            history.push('/')\n            getCardsState(jwt)\n          }\n        }).catch(err => {\n          localStorage.removeItem('jwt')\n          console.error(err)\n        })\n    }\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className='page'>\n        <div className=\"page__content\">\n          <Header\n            loggedIn={loggedIn}\n\n            logout={handleLogout}\n          />\n          <Switch>\n            <Route exact path=\"/sign-in\">\n              <Login handleLogin={handleLogin} />\n            </Route>\n            <Route exact path=\"/sign-up\">\n              <Register handleRegister={handleRegister} />\n            </Route>\n            <ProtectedRoute exact path=\"/\"\n              loggedIn={loggedIn}\n              component={Main}\n              onEditAvatar={handleEditAvatarClick}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onCardClick={handleCardClick}\n              onCardDelete={handleCardDelete}\n              onCardLike={handleCardLike}\n              onCardDislike={handleCardDislike}\n              cards={cards}\n            />\n          </Switch>\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n          <ImagePopup\n            card={selectedCard}\n            isOpen={isCardPopupOpen}\n            onClose={closeAllPopups}\n          />\n          <InfoTooltip\n            onClose={closeAllPopups}\n            renderState={infoTooltipState}\n          />\n          <Footer />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/Footer.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/Main.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/Header.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/EditAvatarPopup.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/EditProfilePopup.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/ImagePopup.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/AddPlacePopup.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/Register.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/InfoTooltip.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/Login.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/auth.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/ProtectedRoute.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/contexts/CurrentUserContext.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/utils/Api.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/Card.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/PopupWithForm.js",[],"/home/dmitrij/dev/react-mesto-api-full/frontend/src/components/NavBar.js",[],{"ruleId":"88","replacedBy":"89"},{"ruleId":"90","replacedBy":"91"},{"ruleId":"92","severity":1,"message":"93","line":11,"column":8,"nodeType":"94","messageId":"95","endLine":11,"endColumn":11},{"ruleId":"96","severity":1,"message":"97","line":26,"column":6,"nodeType":"98","endLine":26,"endColumn":8,"suggestions":"99"},"no-native-reassign",["100"],"no-negated-in-lhs",["101"],"no-unused-vars","'api' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'tokenCheck'. Either include it or remove the dependency array.","ArrayExpression",["102"],"no-global-assign","no-unsafe-negation",{"desc":"103","fix":"104"},"Update the dependencies array to be: [tokenCheck]",{"range":"105","text":"106"},[965,967],"[tokenCheck]"]