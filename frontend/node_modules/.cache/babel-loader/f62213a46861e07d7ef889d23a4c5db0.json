{"ast":null,"code":"import _toConsumableArray from\"/home/dmitrij/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/dmitrij/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import ImagePopup from'./ImagePopup';import EditProfilePopup from'./EditProfilePopup';import EditAvatarPopup from'./EditAvatarPopup';import AddPlacePopup from'./AddPlacePopup';import{CurrentUserContext}from'../contexts/CurrentUserContext';import api from'../utils/Api';function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setEditProfilePopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddPlacePopupOpen=_React$useState4[0],setAddPlacePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatarPopupOpen=_React$useState6[0],setEditAvatarPopupOpen=_React$useState6[1];var _React$useState7=React.useState({}),_React$useState8=_slicedToArray(_React$useState7,2),selectedCard=_React$useState8[0],setSelectedCard=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),isCardPopupOpen=_React$useState10[0],setCardPopupOpen=_React$useState10[1];var _React$useState11=React.useState({}),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setcurrentUser=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),cards=_React$useState14[0],getCards=_React$useState14[1];React.useEffect(function(){api.getInitialCards().then(function(data){var items=data.map(function(el){return{_id:el._id,name:el.name,link:el.link,likes:el.likes,owner:el.owner};});getCards(items);}).catch(function(err){return console.log(err);});},[]);React.useEffect(function(){api.getUserInfo().then(function(data){setcurrentUser(data);}).catch(function(err){return console.log(err);});},[]);function handleCardClick(card){setCardPopupOpen(true);setSelectedCard(card);}function handleEditProfileClick(){setEditProfilePopupOpen(true);}function handleEditAvatarClick(){setEditAvatarPopupOpen(true);}function handleAddPlaceClick(){setAddPlacePopupOpen(true);}function closeAllPopups(){setEditAvatarPopupOpen(false);setAddPlacePopupOpen(false);setEditProfilePopupOpen(false);setCardPopupOpen(false);}function handleCardDelete(id){api.deleteCard(id).then(function(){getCards(cards.filter(function(card){return card._id!==id;}));}).catch(function(err){return console.log(err);});}function handleCardDislike(id){api.removeLike(id).then(function(newCard){var newCards=cards.map(function(c){return c._id===id?newCard:c;});getCards(newCards);}).catch(function(err){return console.log(err);});}function handleCardLike(id){api.putLike(id).then(function(newCard){var newCards=cards.map(function(c){return c._id===id?newCard:c;});getCards(newCards);}).catch(function(err){return console.log(err);});}function handleUpdateUser(newData){api.patchUserInfo(newData).then(function(data){setcurrentUser(data);closeAllPopups();}).catch(function(err){return console.log(err);});}function handleUpdateAvatar(newAvatar){api.patchAvatar(newAvatar).then(function(data){setcurrentUser(data);closeAllPopups();}).catch(function(err){return console.log(err);});}function handleAddPlaceSubmit(newCard){api.postCard(newCard).then(function(data){getCards([].concat(_toConsumableArray(cards),[data]));closeAllPopups();}).catch(function(err){return console.log(err);});}return/*#__PURE__*/React.createElement(CurrentUserContext.Provider,{value:currentUser},/*#__PURE__*/React.createElement(\"div\",{className:\"page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"page__content\"},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Main,{onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onCardClick:handleCardClick,onCardDelete:handleCardDelete,onCardLike:handleCardLike,onCardDislike:handleCardDislike,cards:cards}),/*#__PURE__*/React.createElement(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/React.createElement(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/React.createElement(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/React.createElement(ImagePopup,{card:selectedCard,isOpen:isCardPopupOpen,onClose:closeAllPopups}),/*#__PURE__*/React.createElement(Footer,null))));}export default App;","map":{"version":3,"sources":["/home/dmitrij/dev/mesto-react/src/components/App.js"],"names":["React","Header","Main","Footer","ImagePopup","EditProfilePopup","EditAvatarPopup","AddPlacePopup","CurrentUserContext","api","App","useState","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","selectedCard","setSelectedCard","isCardPopupOpen","setCardPopupOpen","currentUser","setcurrentUser","cards","getCards","useEffect","getInitialCards","then","data","items","map","el","_id","name","link","likes","owner","catch","err","console","log","getUserInfo","handleCardClick","card","handleEditProfileClick","handleEditAvatarClick","handleAddPlaceClick","closeAllPopups","handleCardDelete","id","deleteCard","filter","handleCardDislike","removeLike","newCard","newCards","c","handleCardLike","putLike","handleUpdateUser","newData","patchUserInfo","handleUpdateAvatar","newAvatar","patchAvatar","handleAddPlaceSubmit","postCard"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup'\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\nimport api from '../utils/Api'\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false)\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false)\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false)\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [isCardPopupOpen, setCardPopupOpen] = React.useState(false)\n  const [currentUser, setcurrentUser] = React.useState({})\n  const [cards, getCards] = React.useState([])\n\n  React.useEffect(() => {\n    api.getInitialCards()\n      .then((data) => {\n        const items = data.map((el) => ({\n          _id: el._id,\n          name: el.name,\n          link: el.link,\n          likes: el.likes,\n          owner: el.owner\n        }))\n\n        getCards(items);\n      })\n      .catch(err => console.log(err))\n  }, [])\n\n  React.useEffect(() => {\n    api.getUserInfo()\n      .then((data) => {\n        setcurrentUser(data)\n      })\n      .catch(err => console.log(err))\n  }, [])\n\n  function handleCardClick(card) {\n    setCardPopupOpen(true)\n    setSelectedCard(card)\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true)\n  }\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true)\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true)\n  }\n\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false)\n    setAddPlacePopupOpen(false)\n    setEditProfilePopupOpen(false)\n    setCardPopupOpen(false)\n  }\n\n  function handleCardDelete(id) {\n    api.deleteCard(id)\n      .then(() => {\n        getCards(cards.filter(card => card._id !== id))\n      })\n      .catch(err => console.log(err))\n  }\n\n  function handleCardDislike(id) {\n    api.removeLike(id)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === id ? newCard : c);\n        getCards(newCards);\n      })\n      .catch(err => console.log(err))\n  }\n\n  function handleCardLike(id) {\n    api.putLike(id)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === id ? newCard : c);\n        getCards(newCards);\n      })\n      .catch(err => console.log(err))\n  }\n\n  function handleUpdateUser(newData) {\n    api.patchUserInfo(newData)\n      .then((data) => {\n        setcurrentUser(data)\n        closeAllPopups()\n      })\n      .catch(err => console.log(err))\n  }\n\n  function handleUpdateAvatar(newAvatar) {\n    api.patchAvatar(newAvatar)\n      .then((data) => {\n        setcurrentUser(data)\n        closeAllPopups()\n      })\n      .catch(err => console.log(err))\n  }\n\n  function handleAddPlaceSubmit(newCard) {\n    api.postCard(newCard)\n      .then((data) => {\n        getCards([...cards, data]); \n        closeAllPopups()\n      })\n      .catch(err => console.log(err))\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className='page'>\n        <div className=\"page__content\">\n          <Header />\n          <Main\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            onCardDelete={handleCardDelete}\n            onCardLike={handleCardLike}\n            onCardDislike={handleCardDislike}\n            cards={cards}\n          />\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n          <ImagePopup\n            card={selectedCard}\n            isOpen={isCardPopupOpen}\n            onClose={closeAllPopups}\n          />\n          <Footer />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}