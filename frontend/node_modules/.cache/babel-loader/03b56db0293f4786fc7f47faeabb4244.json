{"ast":null,"code":"import _classCallCheck from\"/home/dmitrij/dev/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dmitrij/dev/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this._baseUrl=options.baseUrl;this._headers=options.headers;}_createClass(Api,[{key:\"_getResponseData\",value:function _getResponseData(){return function(res){if(res.ok){return res.json();}return Promise.reject(new Error(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status))).then(function(result){return result;});};}},{key:\"getInitialCards\",value:function getInitialCards(){return fetch(\"\".concat(this._baseUrl,\"/cards\"),{headers:this._headers}).then(this._getResponseData());}},{key:\"getUserInfo\",value:function getUserInfo(){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{headers:this._headers}).then(this._getResponseData());}},{key:\"postCard\",value:function postCard(newCard){return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:'POST',headers:this._headers,body:JSON.stringify({name:newCard.name,link:newCard.link})}).then(this._getResponseData());}},{key:\"deleteCard\",value:function deleteCard(id){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id),{method:'DELETE',headers:this._headers}).then(this._getResponseData());}},{key:\"patchUserInfo\",value:function patchUserInfo(newData){return fetch(\"\".concat(this._baseUrl,\"/users/me/\"),{method:'PATCH',headers:this._headers,body:JSON.stringify({name:newData.name,about:newData.about})}).then(this._getResponseData());}},{key:\"patchAvatar\",value:function patchAvatar(newData){return fetch(\"\".concat(this._baseUrl,\"/users/me/avatar\"),{method:'PATCH',headers:this._headers,body:JSON.stringify({avatar:newData.avatar})}).then(this._getResponseData());}},{key:\"putLike\",value:function putLike(id){return fetch(\"\".concat(this._baseUrl,\"/cards/likes/\").concat(id),{method:'PUT',headers:this._headers}).then(this._getResponseData());// .then((data) => {\n// \treturn (data.likes.length)\n// })\n}},{key:\"removeLike\",value:function removeLike(id){return fetch(\"\".concat(this._baseUrl,\"/cards/likes/\").concat(id),{method:'DELETE',headers:this._headers}).then(this._getResponseData());// .then((data) => {\n// \treturn (data.likes.length)\n// })\n}}]);return Api;}();var api=new Api({baseUrl:'https://mesto.nomoreparties.co/v1/cohort-15',headers:{authorization:'bfb56561-5ac4-4046-893e-dcc4ab3eace0','Content-Type':'application/json'}});export default api;","map":{"version":3,"sources":["/home/dmitrij/dev/react-mesto-auth/src/utils/Api.js"],"names":["Api","options","_baseUrl","baseUrl","_headers","headers","res","ok","json","Promise","reject","Error","status","then","result","fetch","_getResponseData","newCard","method","body","JSON","stringify","name","link","id","newData","about","avatar","api","authorization"],"mappings":"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","sourcesContent":["class Api {\n\tconstructor(options) {\n\t\tthis._baseUrl = options.baseUrl;\n\t\tthis._headers = options.headers;\n\t}\n\n\t_getResponseData() {\n\t\treturn res => {\n\t\t\tif (res.ok) {\n\t\t\t\treturn res.json();\n\t\t\t}\n\t\t\treturn Promise.reject(new Error(`Ошибка: ${res.status}`))\n\t\t\t\t.then((result) => {\n\t\t\t\t\treturn result\n\t\t\t\t})\n\t\t}\n\t}\n\n\tgetInitialCards() {\n\t\treturn fetch(`${this._baseUrl}/cards`, {\n\t\t\theaders: this._headers\n\t\t}).then(this._getResponseData())\n\t}\n\n\tgetUserInfo() {\n\t\treturn fetch(`${this._baseUrl}/users/me`, {\n\t\t\theaders: this._headers\n\t\t}).then(this._getResponseData())\n\t}\n\n\tpostCard(newCard) {\n\t\treturn fetch(`${this._baseUrl}/cards`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname: newCard.name,\n\t\t\t\tlink: newCard.link\n\t\t\t})\n\t\t}).then(this._getResponseData())\n\t}\n\n\tdeleteCard(id) {\n\t\treturn fetch(`${this._baseUrl}/cards/${id}`, {\n\t\t\tmethod: 'DELETE',\n\t\t\theaders: this._headers\n\t\t}).then(this._getResponseData())\n\t}\n\n\tpatchUserInfo(newData) {\n\t\treturn fetch(`${this._baseUrl}/users/me/`, {\n\t\t\tmethod: 'PATCH',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname: newData.name,\n\t\t\t\tabout: newData.about\n\t\t\t})\n\t\t}).then(this._getResponseData())\n\t}\n\n\tpatchAvatar(newData) {\n\t\treturn fetch(`${this._baseUrl}/users/me/avatar`, {\n\t\t\tmethod: 'PATCH',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({\n\t\t\t\tavatar: newData.avatar\n\t\t\t})\n\t\t}).then(this._getResponseData())\n\t}\n\n\tputLike(id) {\n\t\treturn fetch(`${this._baseUrl}/cards/likes/${id}`, {\n\t\t\tmethod: 'PUT',\n\t\t\theaders: this._headers\n\t\t})\n\t\t\t.then(this._getResponseData())\n\t\t\t// .then((data) => {\n\t\t\t// \treturn (data.likes.length)\n\t\t\t// })\n\t}\n\n\tremoveLike(id) {\n\t\treturn fetch(`${this._baseUrl}/cards/likes/${id}`, {\n\t\t\tmethod: 'DELETE',\n\t\t\theaders: this._headers\n\t\t})\n\t\t\t.then(this._getResponseData())\n\t\t\t// .then((data) => {\n\t\t\t// \treturn (data.likes.length)\n\t\t\t// })\n\t}\n}\n\nconst api = new Api({\n\tbaseUrl: 'https://mesto.nomoreparties.co/v1/cohort-15',\n\theaders: {\n\t\tauthorization: 'bfb56561-5ac4-4046-893e-dcc4ab3eace0',\n\t\t'Content-Type': 'application/json'\n\t}\n});\n\nexport default api\n"]},"metadata":{},"sourceType":"module"}